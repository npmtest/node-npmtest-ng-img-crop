<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-ng-img-crop/node_modules/ng-img-crop/compile/minified/ng-img-crop.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-ng-img-crop">npmtest-ng-img-crop (v2017.4.25)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-ng-img-crop/node_modules/ng-img-crop/compile/minified/ng-img-crop.js</span></h1>
    <h2>
        
        Statements: <span class="metric">1.6% <small>(3 / 188)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 148)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">1.06% <small>(1 / 94)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(1 / 1)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-ng-img-crop/node_modules/ng-img-crop/compile/minified/</a> &#187; ng-img-crop.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2</td><td class="line-coverage"><span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*! ngImgCrop v0.2.0 License: MIT */!function(){"use strict";var e=angular.module("ngImgCrop",[]);<span class="cstat-no" title="statement not covered" >e.factory("cropAreaCircle",["cropArea",<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn t.prototype=new e,t.prototype._calcCirclePerimeterCoords=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this._size/2,i=e*(Math.PI/180),s=this._x+t*Math.cos(i),r=this._y+t*Math.sin(i);<span class="cstat-no" title="statement not covered" >r</span>eturn[s,r]}</span>,t.prototype._calcResizeIconCenterCoords=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._calcCirclePerimeterCoords(-45)}</span>,t.prototype._isCoordWithinArea=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return Math.sqrt((e[0]-this._x)*(e[0]-this._x)+(e[1]-this._y)*(e[1]-this._y))&lt;this._size/2}</span>,t.prototype._isCoordWithinBoxResize=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this._calcResizeIconCenterCoords(),i=this._boxResizeHoverSize/2;<span class="cstat-no" title="statement not covered" >r</span>eturn e[0]&gt;t[0]-i&amp;&amp;e[0]&lt;t[0]+i&amp;&amp;e[1]&gt;t[1]-i&amp;&amp;e[1]&lt;t[1]+i}</span>,t.prototype._drawArea=<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>e.arc(t[0],t[1],i/2,0,2*Math.PI)}</span>,t.prototype.draw=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)}</span>,t.prototype.processMouseMove=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var i="default",s=!1;<span class="cstat-no" title="statement not covered" >i</span>f(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)<span class="cstat-no" title="statement not covered" >this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,this._areaIsHover=!0,i="move",s=!0,this._events.trigger("area-move");e</span>lse <span class="cstat-no" title="statement not covered" >if(this._boxResizeIsDragging){<span class="cstat-no" title="statement not covered" >i="nesw-resize";<span class="cstat-no" title="statement not covered" >v</span>ar r,o,a;<span class="cstat-no" title="statement not covered" >o</span>=e-this._posResizeStartX,a=this._posResizeStartY-t,r=o&gt;a?this._posResizeStartSize+2*a:this._posResizeStartSize+2*o,this._size=Math.max(this._minSize,r),this._boxResizeIsHover=!0,s=!0,this._events.trigger("area-resize")}</span>else <span class="cstat-no" title="statement not covered" >this._isCoordWithinBoxResize([e,t])?(i="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,s=!0):this._isCoordWithinArea([e,t])&amp;&amp;(i="move",this._areaIsHover=!0,s=!0);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:i}),s}</span>,t.prototype.processMouseDown=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>this._isCoordWithinBoxResize([e,t])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&amp;&amp;(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))}</span>,t.prototype.processMouseUp=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._areaIsDragging&amp;&amp;(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&amp;&amp;(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0}</span>,t}</span>]),e.factory("cropAreaSquare",["cropArea",<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn t.prototype=new e,t.prototype._calcSquareCorners=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this._size/2;<span class="cstat-no" title="statement not covered" >r</span>eturn[[this._x-e,this._y-e],[this._x+e,this._y-e],[this._x-e,this._y+e],[this._x+e,this._y+e]]}</span>,t.prototype._calcSquareDimensions=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this._size/2;<span class="cstat-no" title="statement not covered" >r</span>eturn{left:this._x-e,top:this._y-e,right:this._x+e,bottom:this._y+e}}</span>,t.prototype._isCoordWithinArea=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this._calcSquareDimensions();<span class="cstat-no" title="statement not covered" >r</span>eturn e[0]&gt;=t.left&amp;&amp;e[0]&lt;=t.right&amp;&amp;e[1]&gt;=t.top&amp;&amp;e[1]&lt;=t.bottom}</span>,t.prototype._isCoordWithinResizeCtrl=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var t=this._calcSquareCorners(),i=-1,s=0,r=t.length;r&gt;s;s++){<span class="cstat-no" title="statement not covered" >var o=t[s];<span class="cstat-no" title="statement not covered" >i</span>f(e[0]&gt;o[0]-this._resizeCtrlHoverRadius&amp;&amp;e[0]&lt;o[0]+this._resizeCtrlHoverRadius&amp;&amp;e[1]&gt;o[1]-this._resizeCtrlHoverRadius&amp;&amp;e[1]&lt;o[1]+this._resizeCtrlHoverRadius){<span class="cstat-no" title="statement not covered" >i=s;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}</span>,t.prototype._drawArea=<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>var s=i/2;<span class="cstat-no" title="statement not covered" >e</span>.rect(t[0]-s,t[1]-s,i,i)}</span>,t.prototype.draw=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);<span class="cstat-no" title="statement not covered" >f</span>or(var t=this._calcSquareCorners(),i=0,s=t.length;s&gt;i;i++){<span class="cstat-no" title="statement not covered" >var r=t[i];<span class="cstat-no" title="statement not covered" >t</span>his._cropCanvas.drawIconResizeCircle(r,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===i?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}</span>}</span>,t.prototype.processMouseMove=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var i="default",s=!1;<span class="cstat-no" title="statement not covered" >i</span>f(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)<span class="cstat-no" title="statement not covered" >this._x=e-this._posDragStartX,this._y=t-this._posDragStartY,this._areaIsHover=!0,i="move",s=!0,this._events.trigger("area-move");e</span>lse <span class="cstat-no" title="statement not covered" >if(this._resizeCtrlIsDragging&gt;-1){<span class="cstat-no" title="statement not covered" >var r,o;<span class="cstat-no" title="statement not covered" >s</span>witch(this._resizeCtrlIsDragging){case 0:<span class="cstat-no" title="statement not covered" >r=-1,o=-1,i="nwse-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 1:<span class="cstat-no" title="statement not covered" >r=1,o=-1,i="nesw-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >r=-1,o=1,i="nesw-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >r=1,o=1,i="nwse-resize"}<span class="cstat-no" title="statement not covered" ></span>v</span>ar a,n=(e-this._posResizeStartX)*r,h=(t-this._posResizeStartY)*o;<span class="cstat-no" title="statement not covered" >a</span>=n&gt;h?this._posResizeStartSize+h:this._posResizeStartSize+n;<span class="cstat-no" title="statement not covered" >v</span>ar c=this._size;<span class="cstat-no" title="statement not covered" >t</span>his._size=Math.max(this._minSize,a);<span class="cstat-no" title="statement not covered" >v</span>ar _=(this._size-c)/2;<span class="cstat-no" title="statement not covered" >t</span>his._x+=_*r,this._y+=_*o,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,s=!0,this._events.trigger("area-resize")}</span>else{<span class="cstat-no" title="statement not covered" >var g=this._isCoordWithinResizeCtrl([e,t]);<span class="cstat-no" title="statement not covered" >i</span>f(g&gt;-1){<span class="cstat-no" title="statement not covered" >switch(g){case 0:<span class="cstat-no" title="statement not covered" >i="nwse-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 1:<span class="cstat-no" title="statement not covered" >i="nesw-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >i="nesw-resize";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >i="nwse-resize"}<span class="cstat-no" title="statement not covered" ></span>t</span>his._areaIsHover=!1,this._resizeCtrlIsHover=g,s=!0}</span>else <span class="cstat-no" title="statement not covered" >this._isCoordWithinArea([e,t])&amp;&amp;(i="move",this._areaIsHover=!0,s=!0)}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span>eturn this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:i}),s}</span>,t.prototype.processMouseDown=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var i=this._isCoordWithinResizeCtrl([e,t]);<span class="cstat-no" title="statement not covered" >i</span>&gt;-1?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=i,this._resizeCtrlIsHover=i,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([e,t])&amp;&amp;(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=e-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))}</span>,t.prototype.processMouseUp=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._areaIsDragging&amp;&amp;(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging&gt;-1&amp;&amp;(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0}</span>,t}</span>]),e.factory("cropArea",["cropCanvas",<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=<span class="fstat-no" title="function not covered" >function(t,i){<span class="cstat-no" title="statement not covered" ></span>this._ctx=t,this._events=i,this._minSize=80,this._cropCanvas=new e(t),this._image=new Image,this._x=0,this._y=0,this._size=200}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn t.prototype.getImage=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._image}</span>,t.prototype.setImage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>this._image=e}</span>,t.prototype.getX=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._x}</span>,t.prototype.setX=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>this._x=e,this._dontDragOutside()}</span>,t.prototype.getY=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._y}</span>,t.prototype.setY=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>this._y=e,this._dontDragOutside()}</span>,t.prototype.getSize=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._size}</span>,t.prototype.setSize=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>this._size=Math.max(this._minSize,e),this._dontDragOutside()}</span>,t.prototype.getMinSize=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._minSize}</span>,t.prototype.setMinSize=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>this._minSize=e,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()}</span>,t.prototype._dontDragOutside=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this._ctx.canvas.height,t=this._ctx.canvas.width;<span class="cstat-no" title="statement not covered" >t</span>his._size&gt;t&amp;&amp;(this._size=t),this._size&gt;e&amp;&amp;(this._size=e),this._x&lt;this._size/2&amp;&amp;(this._x=this._size/2),this._x&gt;t-this._size/2&amp;&amp;(this._x=t-this._size/2),this._y&lt;this._size/2&amp;&amp;(this._y=this._size/2),this._y&gt;e-this._size/2&amp;&amp;(this._y=e-this._size/2)}</span>,t.prototype._drawArea=<span class="fstat-no" title="function not covered" >function(){</span>},t.prototype.draw=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)}</span>,t.prototype.processMouseMove=<span class="fstat-no" title="function not covered" >function(){</span>},t.prototype.processMouseDown=<span class="fstat-no" title="function not covered" >function(){</span>},t.prototype.processMouseUp=<span class="fstat-no" title="function not covered" >function(){</span>},t}</span>]),e.factory("cropCanvas",[<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],t=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],i=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],s=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],r=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],o=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],a=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],n=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],h={areaOutline:"#fff",resizeBoxStroke:"#fff",resizeBoxFill:"#444",resizeBoxArrowFill:"#fff",resizeCircleStroke:"#fff",resizeCircleFill:"#444",moveIconFill:"#fff"};<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>var _=<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>return[i*e[0]+t[0],i*e[1]+t[1]]}</span>,g=<span class="fstat-no" title="function not covered" >function(e,t,i,s){<span class="cstat-no" title="statement not covered" ></span>c.save(),c.fillStyle=t,c.beginPath();<span class="cstat-no" title="statement not covered" >v</span>ar r,o=_(e[0],i,s);<span class="cstat-no" title="statement not covered" >c</span>.moveTo(o[0],o[1]);<span class="cstat-no" title="statement not covered" >f</span>or(var a in e)<span class="cstat-no" title="statement not covered" >a&gt;0&amp;&amp;(r=_(e[a],i,s),c.lineTo(r[0],r[1]));<span class="cstat-no" title="statement not covered" >c</span></span>.lineTo(o[0],o[1]),c.fill(),c.closePath(),c.restore()}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.drawIconMove=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>g(r,h.moveIconFill,e,t),g(o,h.moveIconFill,e,t),g(a,h.moveIconFill,e,t),g(n,h.moveIconFill,e,t)}</span>,this.drawIconResizeCircle=<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>var s=t*i;<span class="cstat-no" title="statement not covered" >c</span>.save(),c.strokeStyle=h.resizeCircleStroke,c.lineWidth=2,c.fillStyle=h.resizeCircleFill,c.beginPath(),c.arc(e[0],e[1],s,0,2*Math.PI),c.fill(),c.stroke(),c.closePath(),c.restore()}</span>,this.drawIconResizeBoxBase=<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>var s=t*i;<span class="cstat-no" title="statement not covered" >c</span>.save(),c.strokeStyle=h.resizeBoxStroke,c.lineWidth=2,c.fillStyle=h.resizeBoxFill,c.fillRect(e[0]-s/2,e[1]-s/2,s,s),c.strokeRect(e[0]-s/2,e[1]-s/2,s,s),c.restore()}</span>,this.drawIconResizeBoxNESW=<span class="fstat-no" title="function not covered" >function(e,s,r){<span class="cstat-no" title="statement not covered" ></span>this.drawIconResizeBoxBase(e,s,r),g(t,h.resizeBoxArrowFill,e,r),g(i,h.resizeBoxArrowFill,e,r)}</span>,this.drawIconResizeBoxNWSE=<span class="fstat-no" title="function not covered" >function(t,i,r){<span class="cstat-no" title="statement not covered" ></span>this.drawIconResizeBoxBase(t,i,r),g(e,h.resizeBoxArrowFill,t,r),g(s,h.resizeBoxArrowFill,t,r)}</span>,this.drawCropArea=<span class="fstat-no" title="function not covered" >function(e,t,i,s){<span class="cstat-no" title="statement not covered" ></span>var r=e.width/c.canvas.width,o=e.height/c.canvas.height,a=t[0]-i/2,n=t[1]-i/2;<span class="cstat-no" title="statement not covered" >c</span>.save(),c.strokeStyle=h.areaOutline,c.lineWidth=2,c.beginPath(),s(c,t,i),c.stroke(),c.clip(),i&gt;0&amp;&amp;c.drawImage(e,a*r,n*o,i*r,i*o,a,n,i,i),c.beginPath(),s(c,t,i),c.stroke(),c.clip(),c.restore()}</span>}</span>}</span>]),e.factory("cropHost",["$document","cropAreaCircle","cropAreaSquare",<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>var s=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=e.getBoundingClientRect(),i=document.body,s=document.documentElement,r=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,a=s.clientTop||i.clientTop||0,n=s.clientLeft||i.clientLeft||0,h=t.top+r-a,c=t.left+o-n;<span class="cstat-no" title="statement not covered" >r</span>eturn{top:Math.round(h),left:Math.round(c)}}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(r,o,a){<span class="fstat-no" title="function not covered" ></span>function n(){<span class="cstat-no" title="statement not covered" ></span>h.clearRect(0,0,h.canvas.width,h.canvas.height),null!==c&amp;&amp;(h.drawImage(c,0,0,h.canvas.width,h.canvas.height),h.save(),h.fillStyle="rgba(0, 0, 0, 0.65)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore(),_.draw())}<span class="cstat-no" title="statement not covered" ></span>var h=null,c=null,_=null,g=[100,100],u=[300,300],l=200,p=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(null!==c){<span class="cstat-no" title="statement not covered" >_.setImage(c);<span class="cstat-no" title="statement not covered" >v</span>ar e=[c.width,c.height],t=c.width/c.height,i=e;<span class="cstat-no" title="statement not covered" >i</span>[0]&gt;u[0]?(i[0]=u[0],i[1]=i[0]/t):i[0]&lt;g[0]&amp;&amp;(i[0]=g[0],i[1]=i[0]/t),i[1]&gt;u[1]?(i[1]=u[1],i[0]=i[1]*t):i[1]&lt;g[1]&amp;&amp;(i[1]=g[1],i[0]=i[1]*t),r.prop("width",i[0]).prop("height",i[1]).css({"margin-left":-i[0]/2+"px","margin-top":-i[1]/2+"px"}),_.setX(h.canvas.width/2),_.setY(h.canvas.height/2),_.setSize(Math.min(200,h.canvas.width/2,h.canvas.height/2))}</span>else <span class="cstat-no" title="statement not covered" >r.prop("width",0).prop("height",0).css({"margin-top":0});<span class="cstat-no" title="statement not covered" >n</span></span>()}</span>,z=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(null!==c){<span class="cstat-no" title="statement not covered" >var t,i,r=s(h.canvas);<span class="cstat-no" title="statement not covered" >"</span>touchmove"===e.type?(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY):(t=e.pageX,i=e.pageY),_.processMouseMove(t-r.left,i-r.top),n()}</span>}</span>,v=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e.preventDefault(),e.stopPropagation(),null!==c){<span class="cstat-no" title="statement not covered" >var t,i,r=s(h.canvas);<span class="cstat-no" title="statement not covered" >"</span>touchstart"===e.type?(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY):(t=e.pageX,i=e.pageY),_.processMouseDown(t-r.left,i-r.top),n()}</span>}</span>,f=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(null!==c){<span class="cstat-no" title="statement not covered" >var t,i,r=s(h.canvas);<span class="cstat-no" title="statement not covered" >"</span>touchend"===e.type?(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY):(t=e.pageX,i=e.pageY),_.processMouseUp(t-r.left,i-r.top),n()}</span>}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.getResultImageDataURI=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e,t;<span class="cstat-no" title="statement not covered" >r</span>eturn t=angular.element("&lt;canvas&gt;&lt;/canvas&gt;")[0],e=t.getContext("2d"),t.width=l,t.height=l,null!==c&amp;&amp;e.drawImage(c,(_.getX()-_.getSize()/2)*(c.width/h.canvas.width),(_.getY()-_.getSize()/2)*(c.height/h.canvas.height),_.getSize()*(c.width/h.canvas.width),_.getSize()*(c.height/h.canvas.height),0,0,l,l),t.toDataURL()}</span>,this.setNewImageSource=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(c=null,p(),a.trigger("image-updated"),e){<span class="cstat-no" title="statement not covered" >var t=new Image;<span class="cstat-no" title="statement not covered" >t</span>.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.trigger("load-done"),c=t,p(),a.trigger("image-updated")}</span>,t.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.trigger("load-error")}</span>,a.trigger("load-start"),t.src=e}</span>}</span>,this.setMaxDimensions=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>if(u=[e,t],null!==c){<span class="cstat-no" title="statement not covered" >var i=h.canvas.width,s=h.canvas.height,o=[c.width,c.height],a=c.width/c.height,l=o;<span class="cstat-no" title="statement not covered" >l</span>[0]&gt;u[0]?(l[0]=u[0],l[1]=l[0]/a):l[0]&lt;g[0]&amp;&amp;(l[0]=g[0],l[1]=l[0]/a),l[1]&gt;u[1]?(l[1]=u[1],l[0]=l[1]*a):l[1]&lt;g[1]&amp;&amp;(l[1]=g[1],l[0]=l[1]*a),r.prop("width",l[0]).prop("height",l[1]).css({"margin-left":-l[0]/2+"px","margin-top":-l[1]/2+"px"});<span class="cstat-no" title="statement not covered" >v</span>ar p=h.canvas.width/i,z=h.canvas.height/s,v=Math.min(p,z);<span class="cstat-no" title="statement not covered" >_</span>.setX(_.getX()*p),_.setY(_.getY()*z),_.setSize(_.getSize()*v)}</span>else <span class="cstat-no" title="statement not covered" >r.prop("width",0).prop("height",0).css({"margin-top":0});<span class="cstat-no" title="statement not covered" >n</span></span>()}</span>,this.setAreaMinSize=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e=parseInt(e,10),isNaN(e)||(_.setMinSize(e),n())}</span>,this.setResultImageSize=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e=parseInt(e,10),isNaN(e)||(l=e)}</span>,this.setAreaType=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var s=_.getSize(),r=_.getMinSize(),o=_.getX(),g=_.getY(),u=t;<span class="cstat-no" title="statement not covered" >"</span>square"===e&amp;&amp;(u=i),_=new u(h,a),_.setMinSize(r),_.setSize(s),_.setX(o),_.setY(g),null!==c&amp;&amp;_.setImage(c),n()}</span>,h=r[0].getContext("2d"),_=new t(h,a),e.on("mousemove",z),r.on("mousedown",v),e.on("mouseup",f),e.on("touchmove",z),r.on("touchstart",v),e.on("touchend",f),this.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.off("mousemove",z),r.off("mousedown",v),e.off("mouseup",z),e.off("touchmove",z),r.off("touchstart",v),e.off("touchend",z),r.remove()}</span>}</span>}</span>]),e.factory("cropPubSub",[<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e={};<span class="cstat-no" title="statement not covered" >t</span>his.on=<span class="fstat-no" title="function not covered" >function(t,i){<span class="cstat-no" title="statement not covered" ></span>return t.split(" ").forEach(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>e[t]||(e[t]=[]),e[t].push(i)}</span>),this}</span>,this.trigger=<span class="fstat-no" title="function not covered" >function(t,i){<span class="cstat-no" title="statement not covered" ></span>return angular.forEach(e[t],<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.call(null,i)}</span>),this}</span>}</span>}</span>]),e.directive("imgCrop",["$timeout","cropHost","cropPubSub",<span class="fstat-no" title="function not covered" >function(e,t,i){<span class="cstat-no" title="statement not covered" ></span>return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",onChange:"&amp;",onLoadBegin:"&amp;",onLoadDone:"&amp;",onLoadError:"&amp;"},template:"&lt;canvas&gt;&lt;/canvas&gt;",controller:["$scope",<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.events=new i}</span>],link:<span class="fstat-no" title="function not covered" >function(i,s){<span class="cstat-no" title="statement not covered" ></span>var r,o=i.events,a=new t(s.find("canvas"),{},o),n=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=a.getResultImageDataURI();<span class="cstat-no" title="statement not covered" >r</span>!==t&amp;&amp;(r=t,angular.isDefined(e.resultImage)&amp;&amp;(e.resultImage=t),e.onChange({$dataURI:e.resultImage}))}</span>,h=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>i.$apply(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t(e)}</span>)}</span>)}</span>}</span>;<span class="cstat-no" title="statement not covered" >o</span>.on("load-start",h(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.onLoadBegin({})}</span>)).on("load-done",h(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.onLoadDone({})}</span>)).on("load-error",h(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.onLoadError({})}</span>)).on("area-move area-resize",h(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>e.changeOnFly&amp;&amp;n(e)}</span>)).on("area-move-end area-resize-end image-updated",h(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n(e)}</span>)),i.$watch("image",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.setNewImageSource(i.image)}</span>),i.$watch("areaType",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.setAreaType(i.areaType),n(i)}</span>),i.$watch("areaMinSize",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.setAreaMinSize(i.areaMinSize),n(i)}</span>),i.$watch("resultImageSize",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.setResultImageSize(i.resultImageSize),n(i)}</span>),i.$watch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return[s[0].clientWidth,s[0].clientHeight]}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>a.setMaxDimensions(e[0],e[1]),n(i)}</span>,!0),i.$on("$destroy",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.destroy()}</span>)}</span>}}</span>])}</span>();
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Wed Apr 26 2017 02:24:10 GMT+0000 (UTC)</div>
</div>
</body>
</html>
